# MoEngage Q&A Agent v2

> CSM 팀을 위한 AI 기반 기술 지원 어시스턴트

---

## 한 줄 요약

**고객 문의에 대한 초안 답변을 자동 생성하고, CSM 피드백을 통해 학습하는 AI 에이전트**

---

## 왜 만들었나요?

| 기존 방식 | v2 에이전트 |
|-----------|-------------|
| 매번 HelpCenter 검색 | 자동으로 관련 문서 검색 |
| 이전 Q&A 기억에 의존 | 과거 해결 사례 자동 참조 |
| 답변 작성에 시간 소요 | 초안 즉시 생성 |
| 개인 노하우로 축적 | 팀 전체 학습 데이터로 축적 |

---

## 핵심 기능

### 1. 하이브리드 검색
- **MoEngage HelpCenter**: 공식 문서 실시간 검색
- **내부 Q&A 히스토리**: 과거 해결 사례 벡터 검색
- **LLM 쿼리 최적화**: 검색어 자동 개선

### 2. AI 답변 생성
- Claude API 기반 답변 초안 생성
- 검색된 문서만 참조 (할루시네이션 방지)
- 한국어 답변 + 영어 용어 병기

### 3. 대화형 개선 루프
- CSM 피드백 반영하여 답변 개선
- 추가 검색 요청 가능
- 맥락 정보 제공 가능

### 4. 자동 학습
- 개선 과정에서 학습 포인트 추출
- 문의 해석 / 검색 / 답변 작성 3가지 영역 학습
- 향후 답변 품질 향상에 활용

---

## 사용 방법

### Step 1: 티켓 생성
고객 문의 메시지에 🎫 이모지 추가

```
[고객 채널]
고객: 푸시 발송이 안 돼요
       ↓
CSM이 🎫 이모지 추가
```

### Step 2: 답변 검토
CSM 전용 채널에 답변 초안이 자동 게시됨

```
[CSM 채널]
📋 새로운 문의

원본 메시지: [슬랙 링크]

🔍 문제 파악
푸시 발송 실패 관련 문의...

✅ 해결 가이드
1. 푸시 인증서 확인...
2. ...

🔗 참고 자료
- [이전 Q&A] 유사 사례
- [MoEngage HelpCenter] 푸시 설정 가이드
```

### Step 3: 피드백 (선택)
답변이 부족하면 스레드에서 피드백

```
CSM: "SDK 버전별 차이도 추가해줘"
Bot: 📝 개선된 답변 (#1)
     SDK 버전별 푸시 설정 차이...
```

### Step 4: 완료
원본 메시지에 ✅ 이모지 추가 → 히스토리 저장 + 학습

---

## 워크플로우 다이어그램

```
┌─────────────┐     🎫      ┌─────────────┐
│  고객 채널   │ ─────────→ │   봇 처리    │
│  (문의 발생) │            │ (검색+생성)  │
└─────────────┘            └──────┬──────┘
                                  │
                                  ▼
                           ┌─────────────┐
                           │  CSM 채널   │
                           │ (답변 검토)  │
                           └──────┬──────┘
                                  │
                    ┌─────────────┼─────────────┐
                    │             │             │
                    ▼             ▼             ▼
              [피드백 제공]   [답변 승인]    [추가 검색]
                    │             │             │
                    └──────┬──────┘             │
                           │                    │
                           ▼                    │
                    ┌─────────────┐             │
                    │  개선된 답변 │ ←───────────┘
                    └──────┬──────┘
                           │
                           ▼ ✅
                    ┌─────────────┐
                    │ 히스토리 저장 │
                    │  + 학습 추출  │
                    └─────────────┘
```

---

## 기술 스택

| 영역 | 기술 |
|------|------|
| 봇 프레임워크 | Slack Bolt (Python) |
| LLM | Claude claude-sonnet-4-20250514 |
| 벡터 검색 | FAISS + Sentence Transformers |
| 외부 검색 | MoEngage HelpCenter API |
| 배포 | Railway (Persistent Volume) |

---

## 데이터 저장 구조

```
/data
├── history/           # Q&A 히스토리
│   ├── faiss.index    # 벡터 인덱스
│   └── metadata.json  # 엔트리 메타데이터
│
└── learning/          # 학습 데이터
    ├── faiss.index
    └── metadata.json
```

---

## 자주 묻는 질문

### Q: 봇 답변을 그대로 고객에게 보내도 되나요?
A: 검토 후 필요시 수정해서 보내주세요. 봇은 초안을 제공하는 역할입니다.

### Q: 피드백은 몇 번까지 할 수 있나요?
A: 제한 없이 만족할 때까지 개선할 수 있습니다.

### Q: 학습 데이터는 어디에 쓰이나요?
A: 현재는 저장만 하고 있으며, 향후 프롬프트 개선/파인튜닝에 활용 예정입니다.

### Q: HelpCenter에 없는 내용은 어떻게 되나요?
A: "문서에서 관련 내용을 찾을 수 없습니다"라고 답변하며, 절대 만들어내지 않습니다.

---

## 연락처

- **개발/문의**: [담당자 정보]
- **GitHub**: [레포지토리 링크]
- **Slack 채널**: #moengage-qna-bot

---

*Last Updated: 2025-02-03*
